{{< layout/base}}
    {{#title}}미션 관리{{/title}}
    {{#body}}
        <section class="cg-section">
            <div class="cg-container">

                <div class="cg-card">
                    <h2 style="margin:0;font-weight:800">새 미션 등록(관리자)</h2>
                    <form class="mt-3 grid" style="grid-template-columns:repeat(2,minmax(0,1fr));gap:12px"
                          method="post" action="/admin/missions">
                        <input class="cg-input" name="title" placeholder="제목" required>
                        <input class="cg-input" name="dueDate" type="date" required>
                        <select class="cg-input" name="cafeId">
                            <option value="">(선택) 특정 카페</option>
                            {{#cafes}}<option value="{{id}}">{{name}}</option>{{/cafes}}
                        </select>
                        <select class="cg-input" name="sponsoredYn">
                            <option value="N">스폰서 아님</option>
                            <option value="Y">스폰서</option>
                        </select>
                        <textarea class="cg-input" name="description" rows="2" style="grid-column:1/-1" placeholder="설명"></textarea>
                        <button class="cg-btn cg-btn--primary" style="grid-column:1/-1">등록</button>
                    </form>
                </div>

                <div class="cg-card mt-6">
                    <div class="flex items-center justify-between">
                        <h2 style="margin:0;font-weight:800">승인 대기</h2>
                        <a class="cg-btn" href="/admin/missions/review">제출 심사 페이지로 이동</a>
                    </div>
                    <div class="mt-3">
                        {{#pending}}
                            <div class="cg-panel mt-2">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <div class="font-bold">{{title}}</div>
                                        <div class="small text-gray-500">카페ID: {{cafe.id}} · 마감일: {{dueDate}}</div>
                                        {{#description}}<div class="small mt-1">{{.}}</div>{{/description}}
                                    </div>
                                    <div class="flex gap-2">
                                        <form method="post" action="/admin/missions/{{id}}/approve"><button class="cg-btn cg-btn--primary-sm">승인</button></form>
                                        <form method="post" action="/admin/missions/{{id}}/reject"><button class="cg-btn cg-btn--danger-sm">반려</button></form>
                                    </div>
                                </div>
                            </div>
                        {{/pending}}
                        {{^pending}}<div class="small">대기 중인 미션이 없습니다.</div>{{/pending}}
                    </div>
                </div>

            </div>
        </section>
    {{/body}}
{{/ layout/base}}
