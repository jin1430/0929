{{>layout/header}}

<main class="cg-container mypage" style="padding:24px 0">
    <h1 class="cg-title">마이페이지</h1>

    <div class="cg-mypage-grid" id="me-layout">
        <aside>
            <nav class="cg-sidenav">
                <a href="/member/me"       class="{{#nav_me}}is-active{{/nav_me}}">내 정보</a>
                <a href="/member/edit"     class="{{#nav_edit}}is-active{{/nav_edit}}">내 정보 수정</a>
                <a href="/member/reviews"  class="{{#nav_reviews}}is-active{{/nav_reviews}}">내가 쓴 리뷰</a>
                <a href="/favorites"       class="{{#nav_favorites}}is-active{{/nav_favorites}}">즐겨찾기 목록 확인</a>
                <a href="/member/withdraw" class="is-danger {{#nav_withdraw}}is-active{{/nav_withdraw}}">회원 탈퇴</a>
            </nav>
        </aside>

        <section>
            <article class="cg-panel">
                <header class="cg-panel__head">
                    <div>
                        <div class="cg-eyebrow">내 활동</div>
                        <h2 class="cg-panel__title">내가 쓴 리뷰</h2>
                    </div>
                    <div class="cg-badges">
                        <span class="cg-badge">총 {{totalElements}}개</span>
                    </div>
                </header>

                <div class="cg-panel__body">

                    {{#hasContent}}
                        <div class="cg-list" style="display:flex;flex-direction:column;gap:12px;">
                            {{#items}}
                                <div class="cg-card" style="display:grid;grid-template-columns:96px 1fr;gap:16px;align-items:center;">
                                    <div>
                                        {{#cafePhotoUrl}}
                                            <img src="{{cafePhotoUrl}}" alt="썸네일" style="width:96px;height:96px;object-fit:cover;border-radius:12px;border:1px solid var(--line,#e7eeee);" loading="lazy">
                                        {{/cafePhotoUrl}}
                                        {{^cafePhotoUrl}}
                                            <div style="width:96px;height:96px;border-radius:12px;border:1px dashed #d1d5db;display:flex;align-items:center;justify-content:center;color:#9ca3af;">NO IMG</div>
                                        {{/cafePhotoUrl}}
                                    </div>

                                    <div>
                                        <div style="display:flex;justify-content:space-between;gap:10px;align-items:center;">
                                            <a href="/cafes/{{cafeId}}" class="cg-link" style="font-weight:700;">{{cafeName}}</a>
                                            <time class="cg-muted" datetime="{{reviewDate}}">{{reviewDateFmt}}</time>
                                        </div>

                                        <p style="margin:6px 0 10px 0;line-height:1.5">{{excerpt}}</p>

                                        <div style="display:flex;gap:8px;flex-wrap:wrap;">
                                            <a href="/cafes/{{cafeId}}" class="cg-btn">카페 보기</a>
                                            <a href="/reviews/{{reviewId}}/edit" class="cg-btn cg-btn--ghost">리뷰 수정</a>
                                            <form method="post" action="/reviews/{{reviewId}}/delete" onsubmit="return confirm('삭제하시겠습니까?');">
                                                {{#_csrf}}<input type="hidden" name="{{parameterName}}" value="{{token}}">{{/_csrf}}
                                                <button type="submit" class="cg-btn cg-btn--danger">삭제</button>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            {{/items}}
                        </div>

                        <nav class="cg-pagination" style="display:flex;gap:6px;justify-content:center;margin-top:16px;">
                            {{#hasPrev}}<a class="cg-btn cg-btn--ghost" href="?page={{prevPage}}">이전</a>{{/hasPrev}}
                            {{#pages}}
                                <a class="cg-btn {{#active}}is-active{{/active}}" href="?page={{index}}">{{display}}</a>
                            {{/pages}}
                            {{#hasNext}}<a class="cg-btn cg-btn--ghost" href="?page={{nextPage}}">다음</a>{{/hasNext}}
                        </nav>
                    {{/hasContent}}

                    {{^hasContent}}
                        <div class="cg-empty" style="padding:32px;border:1px dashed #d1d5db;border-radius:12px;text-align:center;">
                            <p class="cg-muted">아직 작성한 리뷰가 없습니다.</p>
                            <a class="cg-btn" href="/">카페 보러가기</a>
                        </div>
                    {{/hasContent}}

                </div>
            </article>
        </section>
    </div>
</main>

{{>layout/footer}}